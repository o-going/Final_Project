<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!--Bootstrap-->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
  <title>Main</title>
</head>

<script>
  let pageNum = 1;
  let posts = 6;
  window.addEventListener('load', function() {
    let page = document.querySelector('#page');
    let child = page.children;
    let totalPost = child.length;  // 전체 posts 개수
    let pageBar = Math.ceil(totalPost / posts);
    console.log(pageBar);

    console.log(child);
    console.log(totalPost);

    for(let i=0; i<child.length; i++) {
      child[i].style.display = "none";
    }
    // page.innerHTML = "";
    for(j=(pageNum-1)*posts; j<pageNum*posts; j++) {
      console.log(child[j]);
      child[j].style.display = "flex";
    }

    // <li class="page-item"><a class="page-link" href="#">1</a></li>
    let pagination = document.getElementById('pagination');
    console.log(pagination);
    for(let k=1; k<=pageBar; k++) {
      pagination.innerHTML += `<li class="page-item" id="page-item"><a class="page-link" href="#" onclick="move(${k})">${k}</a></li>`;
      if(k==20) {
        break;
      }
    }
  });

  function move(newPageNum) {
    console.log('aa');
    console.log(newPageNum);

    let page = document.querySelector('#page');
    let child = page.children;
    let pagination = document.getElementById('pagination');
    let item = document.getElementById('page-item');

    // item.classList.add('active');

    for(j=(pageNum-1)*posts; j<Math.min(pageNum*posts, child.length); j++) {
      console.log(child[j]);
      child[j].style.display = "none";
    }
    
    pageNum = newPageNum;

    for(j=(pageNum-1)*posts; j<Math.min(pageNum*posts, child.length); j++) {
      console.log(child[j]);
      child[j].style.display = "flex";
      item.classList.add('active');
    }
  }

</script>

<body>
<!-- Navigation-->
    <nav id="menu" class="navbar navbar-default navbar-fixed-top">
      <div class="container"> 
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand page-scroll" href="/">TecTrees</a> 
        </div>

        <div class="navbar-brand" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="techtree" class="page-scroll">TechTree</a></li>
            <% if(email == null) { %>
              <li class="login"><a href="Login" class="page-scroll">Login</a></li>
            <% }else { %>
              <li><a href="profile" class="page-scroll"><%=name%>님</a></li>
              <li class="logout"><a href="Logout" class="page-scroll">Logout</a></li>
            <% } %>
          </ul>
        </div>
      </div>
    </nav>
    <div class="content">
      <!-- header -->
      <header class="header">
        <div class="container">
          <div class="row">
            <div class="col-5 intro-text">
              <h1>Tech Tree</h1>
              <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iusto, et tenetur. Reprehenderit iste aperiam sint, tempora maxime molestiae quam placeat?</p>
              <a href="techtree" class="btn btn-custom btn-lg page-scroll">페이지 바로가기</a> 
            </div>
            <div class="col-6 intro">
              <img src="images/Pair programming-amico.png" alt="image">
            </div>
          </div>
        </div>
      </header>
      <!-- //header -->

      <!-- companies -->

      <div class="now">
        <div class="container">
          <div class="col-12 random-text">
            <% if(email != null) { %>
                <% for(let i=0; i<user.length; i++) { %>
                  <h2 class="page-header text-center mb-3">
                    현재 채용 중인<strong> Positions</strong>
                  </h2>
                  <h5 class="techtreedata text-center"><%=name%>님의 선택기술: <%=user[i].techtreedata%></h5>
                <% } %>
            <% }else { %>
                <h2 class="page-header text-center">
                  현재 채용 중인<strong> Positions</strong>
                </h2>
            <% } %>
        </div>
        </div>
      </div>



      <div class="random">
        <div class="container">
          <div class="row">
            <div class="col-12 random"  id="page">
              <% for(i in companyRandom) { %>
                <% let p = companyRandom[i] %>
                  <div class="picture-list list">
                    <% if(locals.usertech !== undefined) { %>
                      <a href="/require/<%=p.positionId%>?data=<%=usertech%>">
                    <% }else { %>
                      <a href="/require/<%=p.positionId%>">
                    <% } %>
                      <div class="pictures">
                        <img src="<%=p.logo_src%>">
                      </div>
                        <div class="caption">
                          <h4><%= p.position %></h4>
                          <p><%=p.company %></p>
                          <% let tech_stack = JSON.parse(p.tech_stack) %>
                          <% for(let j=0; j<tech_stack.length; j++) {%>
                            <span class="badge badge-light"><%=tech_stack[j]%></span>
                          <% } %> 
                        </div>
                      
                    </a>
                  </div>
              <% } %>              
            </div>

            <nav aria-label="Page navigation" class="m-auto">
              <ul class="pagination" id="pagination">
                <!-- <li class="page-item">
                  <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                  </a>
                </li> -->
                <!-- <li class="page-item"><a class="page-link" href="#">1</a></li> -->
                <!-- <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li> --> 
                <!-- <li class="page-item">
                  <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                  </a>
                </li> -->
              </ul>
            </nav>

          </div> 
      </div>

    </div>
   
  </div>

  <div class="footer-dark">
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-md-3 item">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="#">Web design</a></li>
                        <li><a href="#">Development</a></li>
                        <li><a href="#">Hosting</a></li>
                    </ul>
                </div>
                <div class="col-sm-6 col-md-3 item">
                    <h3>About</h3>
                    <ul>
                        <li><a href="#">Company</a></li>
                        <li><a href="#">Team</a></li>
                        <li><a href="#">Careers</a></li>
                    </ul>
                </div>
                <div class="col-md-6 item text">
                    <h3>Company Name</h3>
                    <p>Praesent sed lobortis mi. Suspendisse vel placerat ligula. Vivamus ac sem lacus. Ut vehicula rhoncus elementum. Etiam quis tristique lectus. Aliquam in arcu eget velit pulvinar dictum vel in justo.</p>
                </div>
            </div>
            <p class="copyright">Company Name © 2020</p>
        </div>
    </footer>
  </div>
</div>

</body>
</html>